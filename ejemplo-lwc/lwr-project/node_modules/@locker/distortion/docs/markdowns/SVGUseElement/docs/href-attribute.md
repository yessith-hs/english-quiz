## SVGUseElement: `href` attribute

The [`SVGUseElement.href`](https://developer.mozilla.org/en-US/docs/Web/API/SVGUseElement) property is an `SVGAnimatedString` corresponding to the `href` or `xlink:href` attribute of the given `<use>` element.

The `SVGUseElement.href` property reflects the `href` attribute of a `<use>` element inside an `<svg>` element, specifying the URL to an element or fragment that is to be duplicated.

The `href` attribute isnâ€™t present on the `SVGUseElement.prototype` and can only be set using these methods of `Element`:

- `setAttribute`
- `setAttributeNode`
- `setAttributeNS`
- `setAttributeNodeNS`

These methods are covered by distortions on `Element` methods, but require more distortion when used in the context of `SVGUseElement`.

### Distorted Behavior

This distortion sanitizes the value passed for attribute `href` or `xlink:href` on an `SVGUseElement`.

For the `href` or `xlink:href` getter, this distortion does nothing if the URL is to a document fragment in the `<svg>`.

If the URL is for an external resource, the distortion transforms the URL to a document fragment URL and assigns it to a hidden `<div>` element in the page. The document fragment URL is composed of current hostname, resource name, extension followed by an underscore and the id in the referenced resource. A URL such as `/resource.svg#circle` becomes `#HOSTNAMEresourcesvg_circle`.

Lightning Web Security fetches the resource asynchronously using an XHR request and sanitizes the content, then places it in the `<div>` element that has the new document fragment URL. The content is rendered where the `<use>` tag is defined in the `<svg>`. 

### Distorted Behavior for setAttribute
```js
const el = document.createElementNS('http://www.w3.org/2000/svg', 'use');

el.setAttribute('href', '/myresource.svg#circle');
console.log(el.getAttribute('href')); // -> httpmycurrenthostmyresourcesvg_circle

// OR for xlink:href
el.setAttribute('xlink:href', '/myresource.svg#circle');
console.log(el.getAttributeNS('http://www.w3.org/1999/xlink', 'href')); // null
console.log(el.getAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href')); // null
console.log(el.getAttribute('xlink:href')); // httpmycurrenthostmyresourcesvg_circle
```

### Distorted Behavior for setAttributeNode
```js
const el = document.createElementNS('http://www.w3.org/2000/svg', 'use');
let attr = document.createAttribute('href');
attr.value = '/myresource.svg#circle';
el.setAttributeNode(attr);
console.log(el.getAttribute('href')); // httpmycurrenthostmyresourcesvg_circle

// OR for xlink:href
attr = document.createAttribute('http://www.w3.org/1999/xlink', 'xlink:href');
attr.value = '/myresource.svg#circle';
el.setAttributeNode(attr);
console.log(el.getAttributeNS('http://www.w3.org/1999/xlink', 'href')); // null
console.log(el.getAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href')); // null
console.log(el.getAttribute('xlink:href')); // null
```

### Distorted Behavior for setAttributeNS
```js
const el = document.createElementNS('http://www.w3.org/2000/svg', 'use');

el.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '/myresource.svg#circle');
console.log(el.getAttributeNS('http://www.w3.org/1999/xlink', 'href')); // httpmycurrenthostmyresourcesvg_circle

// OR for xlink:href
el.setAttributeNS('hhttp://www.w3.org/1999/xlink', 'xlink:href', '/myresource.svg#circle');
console.log(el.getAttributeNS('http://www.w3.org/1999/xlink', 'href')); // httpmycurrenthostmyresourcesvg_circle
console.log(el.getAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href')); // null
```

#### Distorted Behavior for setAttributeNodeNS
```js
const el = document.createElementNS('http://www.w3.org/2000/svg', 'use');

let attr = document.createAttributeNS('http://www.w3.org/1999/xlink', 'href');
attr.value = '/myresource.svg#circle';
el.setAttributeNodeNS(attr);
console.log(el.getAttributeNS('http://www.w3.org/1999/xlink', 'href')); // httpmycurrenthostmyresourcesvg_circle

// OR for xlink:href
attr = document.createAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href');
attr.value = '/myresource.svg#circle';
el.setAttributeNodeNS(attr);
console.log(el.getAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href')); // httpmycurrenthostmyresourcesvg_circle
```

